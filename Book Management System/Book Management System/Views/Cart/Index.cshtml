@model Book_Management_System.Common.CartResponseModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    <style >

    .panel {
        margin-bottom: 20px;
        background-color: #fff;
        border: 1px solid transparent;
        border-radius: 4px;
        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
        box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
    }

    .panel-body {
        padding: 15px;
    }

    .panel > .list-group {
        margin-bottom: 0;
    }

        .panel > .list-group .list-group-item {
            border-width: 1px 0;
            border-radius: 0;
        }

            .panel > .list-group .list-group-item:first-child {
                border-top: 0;
            }

            .panel > .list-group .list-group-item:last-child {
                border-bottom: 0;
            }

        .panel > .list-group:first-child .list-group-item:first-child {
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        .panel > .list-group:last-child .list-group-item:last-child {
            border-bottom-right-radius: 3px;
            border-bottom-left-radius: 3px;
        }

    .panel-heading + .list-group .list-group-item:first-child {
        border-top-width: 0;
    }

    .panel > .table,
    .panel > .table-responsive > .table {
        margin-bottom: 0;
    }

        .panel > .table:first-child > thead:first-child > tr:first-child td:first-child,
        .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:first-child,
        .panel > .table:first-child > tbody:first-child > tr:first-child td:first-child,
        .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:first-child,
        .panel > .table:first-child > thead:first-child > tr:first-child th:first-child,
        .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:first-child,
        .panel > .table:first-child > tbody:first-child > tr:first-child th:first-child,
        .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:first-child {
            border-top-left-radius: 3px;
        }

        .panel > .table:first-child > thead:first-child > tr:first-child td:last-child,
        .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:last-child,
        .panel > .table:first-child > tbody:first-child > tr:first-child td:last-child,
        .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:last-child,
        .panel > .table:first-child > thead:first-child > tr:first-child th:last-child,
        .panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:last-child,
        .panel > .table:first-child > tbody:first-child > tr:first-child th:last-child,
        .panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:last-child {
            border-top-right-radius: 3px;
        }

        .panel > .table:last-child > tbody:last-child > tr:last-child td:first-child,
        .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:first-child,
        .panel > .table:last-child > tfoot:last-child > tr:last-child td:first-child,
        .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:first-child,
        .panel > .table:last-child > tbody:last-child > tr:last-child th:first-child,
        .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:first-child,
        .panel > .table:last-child > tfoot:last-child > tr:last-child th:first-child,
        .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:first-child {
            border-bottom-left-radius: 3px;
        }

        .panel > .table:last-child > tbody:last-child > tr:last-child td:last-child,
        .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:last-child,
        .panel > .table:last-child > tfoot:last-child > tr:last-child td:last-child,
        .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:last-child,
        .panel > .table:last-child > tbody:last-child > tr:last-child th:last-child,
        .panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:last-child,
        .panel > .table:last-child > tfoot:last-child > tr:last-child th:last-child,
        .panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:last-child {
            border-bottom-right-radius: 3px;
        }

    .panel > .panel-body + .table,
    .panel > .panel-body + .table-responsive {
        border-top: 1px solid #ddd;
    }

    .panel > .table > tbody:first-child > tr:first-child th,
    .panel > .table > tbody:first-child > tr:first-child td {
        border-top: 0;
    }

    .panel > .table-bordered,
    .panel > .table-responsive > .table-bordered {
        border: 0;
    }

        .panel > .table-bordered > thead > tr > th:first-child,
        .panel > .table-responsive > .table-bordered > thead > tr > th:first-child,
        .panel > .table-bordered > tbody > tr > th:first-child,
        .panel > .table-responsive > .table-bordered > tbody > tr > th:first-child,
        .panel > .table-bordered > tfoot > tr > th:first-child,
        .panel > .table-responsive > .table-bordered > tfoot > tr > th:first-child,
        .panel > .table-bordered > thead > tr > td:first-child,
        .panel > .table-responsive > .table-bordered > thead > tr > td:first-child,
        .panel > .table-bordered > tbody > tr > td:first-child,
        .panel > .table-responsive > .table-bordered > tbody > tr > td:first-child,
        .panel > .table-bordered > tfoot > tr > td:first-child,
        .panel > .table-responsive > .table-bordered > tfoot > tr > td:first-child {
            border-left: 0;
        }

        .panel > .table-bordered > thead > tr > th:last-child,
        .panel > .table-responsive > .table-bordered > thead > tr > th:last-child,
        .panel > .table-bordered > tbody > tr > th:last-child,
        .panel > .table-responsive > .table-bordered > tbody > tr > th:last-child,
        .panel > .table-bordered > tfoot > tr > th:last-child,
        .panel > .table-responsive > .table-bordered > tfoot > tr > th:last-child,
        .panel > .table-bordered > thead > tr > td:last-child,
        .panel > .table-responsive > .table-bordered > thead > tr > td:last-child,
        .panel > .table-bordered > tbody > tr > td:last-child,
        .panel > .table-responsive > .table-bordered > tbody > tr > td:last-child,
        .panel > .table-bordered > tfoot > tr > td:last-child,
        .panel > .table-responsive > .table-bordered > tfoot > tr > td:last-child {
            border-right: 0;
        }

        .panel > .table-bordered > thead > tr:first-child > th,
        .panel > .table-responsive > .table-bordered > thead > tr:first-child > th,
        .panel > .table-bordered > tbody > tr:first-child > th,
        .panel > .table-responsive > .table-bordered > tbody > tr:first-child > th,
        .panel > .table-bordered > tfoot > tr:first-child > th,
        .panel > .table-responsive > .table-bordered > tfoot > tr:first-child > th,
        .panel > .table-bordered > thead > tr:first-child > td,
        .panel > .table-responsive > .table-bordered > thead > tr:first-child > td,
        .panel > .table-bordered > tbody > tr:first-child > td,
        .panel > .table-responsive > .table-bordered > tbody > tr:first-child > td,
        .panel > .table-bordered > tfoot > tr:first-child > td,
        .panel > .table-responsive > .table-bordered > tfoot > tr:first-child > td {
            border-top: 0;
        }

        .panel > .table-bordered > thead > tr:last-child > th,
        .panel > .table-responsive > .table-bordered > thead > tr:last-child > th,
        .panel > .table-bordered > tbody > tr:last-child > th,
        .panel > .table-responsive > .table-bordered > tbody > tr:last-child > th,
        .panel > .table-bordered > tfoot > tr:last-child > th,
        .panel > .table-responsive > .table-bordered > tfoot > tr:last-child > th,
        .panel > .table-bordered > thead > tr:last-child > td,
        .panel > .table-responsive > .table-bordered > thead > tr:last-child > td,
        .panel > .table-bordered > tbody > tr:last-child > td,
        .panel > .table-responsive > .table-bordered > tbody > tr:last-child > td,
        .panel > .table-bordered > tfoot > tr:last-child > td,
        .panel > .table-responsive > .table-bordered > tfoot > tr:last-child > td {
            border-bottom: 0;
        }

    .panel > .table-responsive {
        margin-bottom: 0;
        border: 0;
    }

    .panel-heading {
        padding: 10px 15px;
        border-bottom: 1px solid transparent;
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
    }

        .panel-heading > .dropdown .dropdown-toggle {
            color: inherit;
        }

    .panel-title {
        margin-top: 0;
        margin-bottom: 0;
        font-size: 16px;
        color: inherit;
    }

        .panel-title > a {
            color: inherit;
        }

    .panel-footer {
        padding: 10px 15px;
        background-color: #f5f5f5;
        border-top: 1px solid #ddd;
        border-bottom-right-radius: 3px;
        border-bottom-left-radius: 3px;
    }

    .panel-group {
        margin-bottom: 20px;
    }

        .panel-group .panel {
            margin-bottom: 0;
            overflow: hidden;
            border-radius: 4px;
        }

            .panel-group .panel + .panel {
                margin-top: 5px;
            }

        .panel-group .panel-heading {
            border-bottom: 0;
        }

            .panel-group .panel-heading + .panel-collapse .panel-body {
                border-top: 1px solid #ddd;
            }

        .panel-group .panel-footer {
            border-top: 0;
        }

            .panel-group .panel-footer + .panel-collapse .panel-body {
                border-bottom: 1px solid #ddd;
            }

    .panel-default {
        border-color: #ddd;
    }

        .panel-default > .panel-heading {
            color: #333;
            background-color: #f5f5f5;
            border-color: #ddd;
        }

            .panel-default > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #ddd;
            }

        .panel-default > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #ddd;
        }

    .panel-primary {
        border-color: #428bca;
    }

        .panel-primary > .panel-heading {
            color: #fff;
            background-color: #428bca;
            border-color: #428bca;
        }

            .panel-primary > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #428bca;
            }

        .panel-primary > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #428bca;
        }

    .panel-success {
        border-color: #d6e9c6;
    }

        .panel-success > .panel-heading {
            color: #3c763d;
            background-color: #dff0d8;
            border-color: #d6e9c6;
        }

            .panel-success > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #d6e9c6;
            }

        .panel-success > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #d6e9c6;
        }

    .panel-info {
        border-color: #bce8f1;
    }

        .panel-info > .panel-heading {
            color: #31708f;
            background-color: #d9edf7;
            border-color: #bce8f1;
        }

            .panel-info > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #bce8f1;
            }

        .panel-info > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #bce8f1;
        }

    .panel-warning {
        border-color: #faebcc;
    }

        .panel-warning > .panel-heading {
            color: #8a6d3b;
            background-color: #fcf8e3;
            border-color: #faebcc;
        }

            .panel-warning > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #faebcc;
            }

        .panel-warning > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #faebcc;
        }

    .panel-danger {
        border-color: #ebccd1;
    }

        .panel-danger > .panel-heading {
            color: #a94442;
            background-color: #f2dede;
            border-color: #ebccd1;
        }

            .panel-danger > .panel-heading + .panel-collapse .panel-body {
                border-top-color: #ebccd1;
            }

        .panel-danger > .panel-footer + .panel-collapse .panel-body {
            border-bottom-color: #ebccd1;
        }

    .detail-title h4 {
        font-family: 'Times New Roman';
        font-weight: bold;
    }

    .detail-title a {
        text-decoration: none;
    }

    .detail-title h5 {
        font-family: Arial, Helvetica, sans-serif
    }

    .panel-body p {
        font-family: 'Times New Roman';
        font-size: 20px
    }

    .wrap-table-shopping-cart {
        overflow: auto;
        border-top: solid 1px #DEE2E6;
        border-left: solid 1px #DEE2E6;
        border-right: solid 1px #DEE2E6;
        border-bottom: solid 1px #DEE2E6;
    }

        .wrap-table-shopping-cart td {
            vertical-align: middle
        }

    .table-shopping-cart {
        border-collapse: collapse;
        width: 100%;
        min-width: 680px;
    }

        .table-shopping-cart tr {
            border-top: 1px solid #e6e6e6;
            border-bottom: 1px solid #e6e6e6;
        }

        .table-shopping-cart .column-1 {
            width: 133px;
            padding-left: 50px;
        }

        .table-shopping-cart .column-2 {
            width: 220px;
            font-size: 15px;
        }

        .table-shopping-cart .column-3 {
            width: 120px;
            font-size: 16px;
        }

        .table-shopping-cart .column-4 {
            width: 145px;
        }

        .table-shopping-cart .column-5 {
            width: 172px;
            padding-right: 50px;
            font-size: 16px;
        }

        .table-shopping-cart .column-6 {
            vertical-align: middle;
        }

        .table-shopping-cart .table_row {
            height: 185px;
        }

            .table-shopping-cart .table_row td {
                padding-bottom: 20px;
            }

                .table-shopping-cart .table_row td.column-1 {
                    padding-bottom: 20px;
                }

        .table-shopping-cart .table_head th {
            font-family: Poppins-Bold;
            font-size: 13px;
            color: #555;
            text-transform: uppercase;
            line-height: 1.6;
            padding-top: 15px;
            padding-bottom: 15px;
        }

        .table-shopping-cart td {
            font-family: Poppins-Regular;
            color: #555;
            line-height: 1.6;
            vertical-align: middle
        }

    .how-itemcart1 {
        width: 80px;
        position: relative;
        cursor: pointer;
    }

        .how-itemcart1 img {
            width: 100%;
        }

        .how-itemcart1::after {
            content: '\e870';
            font-family: Linearicons-Free;
            font-size: 16px;
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-color: rgba(0,0,0,0.5);
            color: #fff;
            transition: all 0.3s;
            -webkit-transition: all 0.3s;
            -o-transition: all 0.3s;
            -moz-transition: all 0.3s;
            opacity: 0;
        }

    .modal {
        text-align: center;
        padding: 0 !important;
    }

        .modal:before {
            content: '';
            display: inline-block;
            height: 100%;
            vertical-align: middle;
            margin-right: -4px;
        }

    .modal-dialog {
        display: inline-block;
        text-align: left;
        vertical-align: middle;
    }
</style>

<div class="main_content">
    <!-- TITLE-->
    <div class="sidebar_title">
        <h5 style="font-weight: bolder">
            @Book_Management_System.Resources.Client.CartResource.Resources.Cart
        </h5>
        <hr style="height: 10px; border: 0;box-shadow: 0 10px 10px -10px #8c8b8b inset;" />
    </div>
    <!-- CART ITEM -->
    <div id="main">

        @{ Html.RenderAction("IndexPartialView", "Cart");}
        @*@if (Model == null)
            {
                <div class="row">
                    <div class="col-md-12">
                        <div class="wrap-table-shopping-cart">
                            <h4 class="text-center">Your cart is empty !</h4>
                            <p class="text-center">Please buy something</p>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <!-- List item-->
                        <div class="row">
                            <div class="col-md-12">
                                <div class="wrap-table-shopping-cart">

                                    <table class="table table-condensed text-center" id="all">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" id="selectAll">
                                                        <label class="custom-control-label" for="selectAll">All</label>
                                                    </div>
                                                </th>
                                                <th>Image</th>
                                                <th>Title</th>
                                                <th>Price</th>
                                                <th>Quantity</th>
                                                <th>Total</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.CartItems)
                                            {
                                                <tr class="table-row">
                                                    <td>
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="customCheck+'@item.Id'" checked="@item.IsActive">
                                                            <label class="custom-control-label" for="customCheck+'@item.Id'"> </label>
                                                        </div>
                                                    </td>
                                                    <td class="column-1">
                                                        <div class="text-center">
                                                            <img class="how-itemcart1" src="@item.Book.ImageURL" alt="product-image" />
                                                        </div>
                                                    </td>
                                                    <td class="column-2">
                                                        @item.Book.Title
                                                    </td>
                                                    <td class="column-3"> @string.Format("{0:0,0}", item.Book.Price)$</td>
                                                    <td class="column-4">
                                                        <div class="input-group form-group-sm justify-content-sm-center">
                                                            <div class="input-group-prepend">
                                                                <button class="btn btn-outline-secondary btn-number" type="button" data-type="minus" data-field="quantity+'@item.Id'">
                                                                    <i class="fa fa-minus"></i>
                                                                </button>
                                                            </div>

                                                            <input name="quantity+'@item.Id'" id="@item.IdBook" type="text" class="form-control border-secondary input-number" style="max-width:50px; text-align: center" data-total="@item.Id" data-id="@item.Book.Quantity" data-price="@item.Book.Price" value="@item.Quantity" min="1" max="5">

                                                            <div class="input-group-append">
                                                                <button class="btn btn-outline-secondary btn-number" type="button" data-type="plus" data-field="quantity+'@item.Id'">
                                                                    <i class="fa fa-plus"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    @{
                                                        var total = item.Book.Price * item.Quantity;
                                                    }
                                                    <td class="column-5 " id="@item.Id">$@string.Format("{0:0,0}", total)</td>
                                                    <td class="column-6">
                                                        <!--data-toggle="modal" data-target="#myModal"-->
                                                        <button class="btn btn-danger" id="delete" onclick="Delete('@item.IdBook')" data-id="@item.IdBook">
                                                            <span>
                                                                <i class="fa fa-remove"></i>
                                                            </span>
                                                        </button>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                        <!-- Total -->
                        <div class="row">
                            <div class="col-lg-8"></div>
                            <div class="col-lg-4">
                                <table class="table table-borderless" style="text-align: right">
                                    <tr class="table-row">
                                        <td>
                                            <b>
                                                TOTAL:
                                            </b>
                                        </td>
                                        <td>
                                            <bold id="total">
                                                $@string.Format("{0:0,0}", Model.TotalAmount)
                                            </bold>

                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!-- Payment button-->
                        <div class="row justify-content-center">
                            <div class="col-lg-3 ">
                                <button type="submit" class="btn btn-lg btn-outline-primary" style="width: 100%;">
                                    <b>PAYMENT</b>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            }*@
    </div>


</div>

<!-- The Modal -->
<div class="modal fade" id="myModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Modal body -->
            <div class="modal-body">
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <!-- List item-->
                        <div class="row">
                            <div class="col-lg-12">
                                <h5>Do you want to delete this book ?</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button type="button" class="btn btn-warning" id="submit" data-dismiss="modal">Yes</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal">No</button>
                </div>

            </div>

        </div>
    </div>
</div>

<!-- The Modal -->
<div class="modal fade" id="myModal1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Modal body -->
            <div class="modal-body">
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <!-- List item-->
                        <div class="row">
                            <div class="col-lg-12" id="content">
                                <h5>Do you want to delete this book ?</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                </div>

            </div>

        </div>
    </div>
</div>

<!-- Script for quantity-->
@section Js {
    <script>
        $(document).ready(function () {
            $('.btn-number').on('click', (function (event) {
                event.preventDefault();
                fieldName = $(this).attr('data-field');
                type = $(this).attr('data-type');
                var input = $("input[name='" + fieldName + "']");
                var currentVal = parseInt(input.val());
                if (!isNaN(currentVal)) {
                    if (type == 'minus') {
                        if (currentVal > input.attr('min')) {
                            input.val(currentVal - 1).change();
                        }
                        if (parseInt(input.val()) == input.attr('min')) {
                            $(this).attr('disabled', true);
                        }
                    }
                    else if (type == 'plus') {
                        if (currentVal < input.attr('max') ) {
                            input.val(currentVal + 1).change();
                        }

                        if (parseInt(input.val()) == input.attr('max') ) {
                            $(this).attr('disabled', true);
                        }
                    }
                }
                else {
                    input.val(0);
                }
            }));
            $('.input-number').focusin(function () {
                $(this).data('oldValue', $(this).val());
            });
            $('.input-number').change(function (event) {
                event.preventDefault();
                const formatter = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0
                })

                minValue = parseInt($(this).attr('min'));
                maxValue = parseInt($(this).attr('max'));
                valueCurrent = parseInt($(this).val());
                name = $(this).attr('name');

                if (valueCurrent >= minValue) {
                    $(".btn-number[data-type='minus'][data-field='" + name + "']").removeAttr('disabled')
                } else {
                    alert('Sorry, the minimum value was reached');
                    $(this).val($(this).data('oldValue'));
                }
                if (valueCurrent <= maxValue) {
                    $(".btn-number[data-type='plus'][data-field='" + name + "']").removeAttr('disabled')
                } else {
                    alert('Sorry, the maximum value was reached');
                    $(this).val($(this).data('oldValue'));
                }

                //Update quantiy CartItem
                var Id = $(this).attr('data-total');
                $.ajax({
                    type: 'Get',
                    url: "@Url.Action("UpdateCart","Cart")",
                    dataType: 'Json',
                    data: {
                        idItem: Id,
                        id: $(this).attr('id'),
                        quantity: valueCurrent
                    },  
                    cache: false,
                    success: function (response) {
                        if (response.Result == true) {

                            $("#total").html(formatter.format(parseInt(response.Total)));
                            $("#" + Id).html(formatter.format(parseInt(response.New)));
                            $("#totalCart").html(formatter.format(parseInt(response.Total)));
                            Swal.fire({
                                type: 'success',
                                width: 400,
                                height: 300,
                                text: $('#selectAll').attr('data-update-success'),
                            });
                        }
                        else {
                            Swal.fire({
                                type: 'error',
                                width: 400,
                                height: 300,
                                text: $('#selectAll').attr('data-update-fail'),
                            });
                        }
                    },
                });
            });
            $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) ||
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                    // let it happen, don't do anything
                    return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

        });


        //Checkbox All
        $(function () {
            $('#selectAll').change(function (event) {
                var checkboxes = $(this).closest('#all').find(':checkbox');
                if ($(this).prop('checked')) {
                    event.preventDefault();
                    $.ajax({
                        type: 'Get',
                        url: "@Url.Action("SelectAll","Cart")",
                        dataType: 'Json',
                        success: function (response) {
                            if (response.Result == true) {
                                checkboxes.prop('checked', true);
                                Swal.fire({
                                    type: 'success',
                                    width: 400,
                                    height: 300,
                                    text: $('#selectAll').attr('data-select-all'),
                                });
                            }
                            else {
                                Swal.fire({
                                    type: 'error',
                                    width: 400,
                                    height: 300,
                                    text: response.Message,
                                });
                            }

                        }
                    })
                    
                } else if ($(this).prop('checked', false)) {
                     event.preventDefault();
                        $.ajax({
                            type: 'Get',
                            url: "@Url.Action("RemoveSelectAll","Cart")",
                            dataType: 'Json',
                            success: function (response) {
                                if (response.Result == true) {
                                    checkboxes.prop('checked', false);
                                    Swal.fire({
                                        type: 'success',
                                        width: 400,
                                        height: 300,
                                        text: $('#selectAll').attr('data-unselect-all'),
                                    });
                                }
                                else {
                                    Swal.fire({
                                        type: 'error',
                                        width: 400,
                                        height: 300,
                                        text: response.Message,
                                    });
                                }

                            }
                        })
                   
                }
            });

        });

        //Change State CartItem
        $("input[name='check']" ).on('change', function (event) {
            event.preventDefault();
            $.ajax({
                type: 'Get',
                url: "@Url.Action("UpdateState","Cart")",
                dataType: 'Json',
                data: { id: $(this).attr('data-id') },
                success: function (response) {
                    if (response.Result == true) {
                         Swal.fire({
                              type: 'success',
                              width: 400,
                              height: 300,
                              text: $('#selectAll').attr('data-unselect-this'),
                          });
                    }
                    else {
                        Swal.fire({
                            type: 'error',
                            width: 400,
                            height: 300,
                            text: response.Message,
                        });
                    }
                    if (response.Result == true && response.Message =='Choose this book.') {
                        Swal.fire({
                            type: 'success',
                            width: 400,
                            height: 300,
                            text: $('#selectAll').attr('data-select-this'),
                        });
                    }

                }
            })
        })

        // Delete CartItem
        function Delete(IdItem,Id) {

            const formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            })
               //Sweet alert
            const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                    confirmButton: 'btn btn-success',
                    cancelButton: 'btn btn-danger swl-wide'
                },
                buttonsStyling: false,
            })
               //Sweet alert
            swalWithBootstrapButtons.fire({
                title: $('#delete').attr('data-sure-question'),
                text: $('#delete').attr('data-warning'),
                type: 'warning',
                showCancelButton: true,
                confirmButtonText: $('#delete').attr('data-yes'),
                cancelButtonText: $('#delete').attr('data-no'),
                reverseButtons: true
            }).then((result) => {
                if (result.value) {
                    //event.preventDefault();
                    $.ajax({
                        type: 'Get',
                        url: "@Url.Action("Delete","Cart")",
                        dataType: 'Json',
                        data: {
                            idItem: IdItem,
                            id: Id
                        },
                        success: function (response) {
                            //$('#main').html(response);
                            //var a = parseInt($('#quantityCart').attr('data-id'));
                            //var b = parseInt($('#total').attr('data-id'));
                            //$('#amountCart').html(a);
                            //$('#totalCart').html(formatter.format(b));

                            ////Sweet alert
                            //swalWithBootstrapButtons.fire(
                            //    'Deleted!',
                            //    'Your book has been deleted.',
                            //    'success'
                            //)

                            if (response.Result == true) {
                                $('#main').load("/Cart/IndexPartialView");
                                $("#total").html(formatter.format(parseInt(response.Total)));
                                $("#amountCart").html(response.Amount);
                                $("#totalCart").html(formatter.format(parseInt(response.Total)));
                                swalWithBootstrapButtons.fire(
                                     $('#selectAll').attr('data-delete'),
                                    $('#selectAll').attr('data-delete-info'),
                                    'success'
                                );
                            }
                            else {
                                swalWithBootstrapButtons.fire(
                                    'Error',
                                    response.Message,
                                    'error'
                                );
                            }
                        }
                    });

                } 
            });

            @*$('#myModal').modal('show');
            $('#submit').on('click', function (event) {
                event.preventDefault();
                $.ajax({
                    type: 'Get',
                    url: "@Url.Action("Delete","Cart")",
                    //dataType: 'Json',
                    data: {
                        idItem: IdItem,
                        id: Id
                    },
                    success: function (response) {
                        $('#main').html(response);
                        var a = parseInt($('#quantityCart').attr('data-id'));
                        var b = parseInt($('#total').attr('data-id'));
                        $('#amountCart').html(a);
                        $('#totalCart').html(formatter.format(b));
                        //if (response.Result == true) {
                        //    alert(response.Message);
                        //    $("#total").html(formatter.format(parseInt(response.Total)));
                        //    $("#amountCart").html(formatter.format(parseInt(response.Amount)));
                        //    $("#totalCart").html(formatter.format(parseInt(response.Total)));

                        //}
                        //else {
                        //    alert(response.Message);
                        //}
                    }
                });
            });*@
        };
    </script>
}

