@model Book_Management_System.Common.Register
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Areas/Admin/Assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/Areas/Admin/Assets/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="~/Areas/Admin/Assets/css/mycss/mystyle.css" rel="stylesheet" />
    <!-- Bootstrap Validator CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css" />
    <!-- Bootstrap DatePicker CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker3.min.css">
    <style>
        .avatar-wrapper {
            position: relative;
            height: 200px;
            width: 200px;
            margin: 20px auto;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 1px 1px 15px -5px black;
            transition: all .3s ease;
        }

            .avatar-wrapper:hover {
                transform: scale(1.05);
                cursor: pointer;
            }

                .avatar-wrapper:hover .profile-pic {
                    opacity: .5;
                }

        .profile-pic {
            height: 100%;
            width: 100%;
            transition: all .3s ease;
        }

            .profile-pic:after {
                font-family: FontAwesome;
                content: "\f007";
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                position: absolute;
                font-size: 200px;
                background: #ecf0f1;
                color: #34495e;
                text-align: center;
            }

        .upload-button {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
        }

        .fa-arrow-circle-up {
            position: absolute;
            font-size: 234px;
            top: -14px;
            left: 0;
            right: 0;
            bottom: 0;
            text-align: center;
            opacity: 0;
            transition: all .3s ease;
            color: #34495e;
        }

            .fa-arrow-circle-up:hover {
                opacity: .9;
            }
    </style>
</head>
<body>
    <div class="container" style="margin-top: 30px">
        <div class="row col-md-offset-3 col-md-6">
            <div class="panel ">
                <div class="panel-heading">
                    <b class="title ">Register</b>
                    <hr />
                </div>
                <div class="panel-body">
                    @using (Html.BeginForm("Create", "Register", FormMethod.Post, new { @class = "form-horizontal", @id = "RegisterForm", @style = "margin-top: -15px", enctype = "multipart/form-data" }))
                    {

                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(m => m.IdAccount)
                        @Html.HiddenFor(m => m.IdRole)
                        @Html.HiddenFor(m => m.IsActiveAccount)
                        @Html.HiddenFor(m => m.IdUser)
                        @Html.HiddenFor(m => m.IsActiveUser)
                        <!--Upload avatar-->
                        <div class="avatar-wrapper">
                            <img class="profile-pic" src="">
                            <div class="upload-button">
                                <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                            </div>
                            @Html.EditorFor(m => m.Avatar, new { htmlAttributes = new { @class = "file-upload", @type = "file", @accept = "image/*", @style = "display: none" } })
                            @Html.ValidationMessageFor(m => m.Avatar, "", new { @class = "text-danger" })
                        </div>
                        <!-- Input username -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Username: </label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.UserName, new { @class = "form-control", @placeholder = "Enter user name" })
                            </div>
                        </div>
                        <!-- Input password -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Password: </label>
                            <div class="col-sm-7">
                                @Html.EditorFor(m => m.Password, new { htmlAttributes = new { @class = "form-control", @placeholder = "6-30 characters", @type = "password" } })
                            </div>
                        </div>
                        <!-- Re-enter password -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Re-enter password: </label>
                            <div class="col-sm-7">
                                @Html.Editor("Confirm_Password", new { htmlAttributes = new { @class = "form-control", @type = "password", @placeholder = "6-30 characters" } })
                            </div>
                        </div>
                        <!-- Input firstname -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">First name: </label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @placeholder = "Enter first name" })
                            </div>
                        </div>
                        <!-- Input lastname -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Last name: </label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.LastName, new { @class = "form-control", @placeholder = "Enter last name" })
                            </div>
                        </div>
                        <!-- Choose birthday -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Birthday</label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.Birthday, new { @class = "form-control", id = "datepicker-birthday", @placeholder = "MM/DD/YYYY", @type = "datetime" })
                            </div>
                        </div>
                        <!-- Input Email -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Email: </label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @placeholder = "Enter your email", @type = "email" })
                            </div>
                        </div>
                        <!-- Input address -->
                        <div class="form-group">
                            <label class="control-label col-sm-4">Address: </label>
                            <div class="col-sm-7">
                                @Html.TextBoxFor(m => m.Address, new { @class = "form-control", @placeholder = "Enter address" })
                            </div>
                        </div>
                        <!-- Select gender-->
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="gender">Gender:</label>
                            <div class="col-sm-7">
                                <div class="radio-inline">
                                    <label>
                                        @Html.RadioButtonFor(m => m.Gender, true, new { @id = "male" }) Male
                                    </label>
                                </div>
                                <div class="radio-inline">
                                    <label>
                                        @Html.RadioButtonFor(m => m.Gender, false, new { @id = "female" }) Female
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- Submit and clear text button -->
                        <div class="form-group">
                            <div class="col-sm-offset-4 col-sm-8">
                                <button type="submit" id="submit_register" class="btn btn-success">Save</button>
                                <button type="reset" id="reset" class="btn btn-default">Reset</button>
                            </div>
                        </div>

                    }
                </div>
            </div>
        </div>
    </div>
    <!-- Core Scripts-->
    <script src="~/Areas/Admin/Assets/js/bootstrap.min.js"></script>
    <script src="~/Areas/Admin/Assets/js/sb-admin.js"></script>
    <script src="~/Areas/Admin/Assets/js/jquery-1.10.2.js"></script>
    <!-- Bootstrap Validator -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/js/bootstrapValidator.min.js"></script>
    <!-- Bootstrap DatePicker-->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
    <!-- SweerAlert-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <!-- SCRIPTS -->
    <!-- Bootstrap validator-->
    <script type="text/javascript">
        /*Bootstrap validator*/
        $(document).ready(function () {
            $('#RegisterForm').bootstrapValidator({
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    UserName: {
                        validators: {
                            notEmpty: {
                                message: 'User name can not be empty'
                            },
                            stringLength: {
                                min: 2,
                                max: 50
                            },
                            remote: {
                                url: "@Url.Action("IsUserNameUnique", "Register")",
                                data: function (validator) {
                                    return {
                                        UserName: validator.getFieldElements('UserName').val()
                                    };
                                },
                                message: 'The username is not available'
                            }
                        }
                    },
                    Password: {
                        validators: {
                            stringLength: {
                                min: 6,
                                max: 30,
                                message: 'Password must have at least 6 and less than 30 characters'
                            },
                            notEmpty: {
                                message: 'Password can not be empty'
                            },
                            regexp: {
                                regexp: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z0-9\S]{6,30}$/,
                                message: 'Password must be 6-30 characters, at least one uppercase letter, one lowercase letter, one number and no whitespace (special characters are allowed)'
                            }
                        }
                    },
                    Confirm_Password: {
                        validators: {
                            stringLength: {
                                min: 6,
                                max: 30,
                                message: 'Confirm password must have at least 6 characters'
                            },
                            notEmpty: {
                                message: "Confirm password can not be empty"
                            },
                            identical: {
                                field: 'Password',
                                message: 'Password does not match'
                            }
                        }
                    },
                    FirstName: {
                        validators: {
                            notEmpty: {
                                message: 'First name can not be empty'
                            },
                            stringLength: {
                                min: 2,
                                max: 50
                            }
                        }
                    },
                    LastName: {
                        validators: {
                            notEmpty: {
                                message: 'Last name can not be empty'
                            },
                            stringLength: {
                                min: 2,
                                max: 50
                            }
                        }
                    },
                    Email: {
                        validators: {
                            notEmpty: {
                                message: 'Email can not be empty'
                            },
                            stringLength: {
                                max: 100
                            },
                            remote: {
                                url: "@Url.Action("IsEmailUnique", "Register")",
                                data: function (validator) {
                                    return {
                                        UserName: validator.getFieldElements('Email').val()
                                    };
                                },
                                message: 'Email is already taken, please choose another one'
                            }
                        }
                    },
                    Birthday: {
                        validators: {
                            date: {
                                format: 'MM/DD/YYYY',
                                message: 'The value is not a valid date'
                            }
                        }
                    },
                    Address: {
                        validators: {
                            notEmpty: {
                                message: 'Address can not be empty'
                            }
                        }
                    },
                    Gender: {
                        validators: {
                            notEmpty: {
                                message: 'Please choose your gender'
                            }
                        }
                    }
                }
            })
        });
    </script>
    <!--Date picker-->
    <script>
        $('#datepicker-birthday').datepicker({
            autoclose: true,
            format: 'mm/dd/yyyy'
        }).on('changeDate', function (e) {
            $("#RegisterForm").bootstrapValidator('revalidateField', 'Birthday')
        });
    </script>
    <!-- Upload avatar-->
    <script>
        $(document).ready(function () {

            var readURL = function (input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('.profile-pic').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(input.files[0]);
                }
            }

            $(".file-upload").on('change', function () {
                readURL(this);
            });

            $(".upload-button").on('click', function () {
                $(".file-upload").click();
            });
        });
    </script>
</body>
</html>

